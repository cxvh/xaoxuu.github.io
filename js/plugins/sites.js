const sitesjs={requestAPI:(t,e,s)=>{let n=5;!function r(){return new Promise((i,o)=>{let a=0,c=setTimeout(()=>{0===a&&(a=2,c=null,o("请求超时"),0==n&&s())},5e3);fetch(t).then(function(t){if(2!==a&&(clearTimeout(c),i(t),c=null,a=1),t.ok)return t.json();throw new Error("Network response was not ok.")}).then(function(t){n=0,e(t)}).catch(function(t){n>0?(n-=1,setTimeout(()=>{r()},5e3)):s()})})}()},layout:t=>{const e=$(t.el)[0];$(e).append('<div class="loading-wrap"><svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg><p></p></div>'),sitesjs.requestAPI(t.api,function(t){$(e).find(".loading-wrap").remove(),t.content.forEach((t,s)=>{var n='<div class="site-card">';n+='<a class="site-link" target="_blank" rel="external nofollow noopener noreferrer" href="'+t.url+'">',n+='<img src="'+(t.screenshot||"https://image.thum.io/get/width/1024/crop/768/"+site.url)+'" onerror="javascript:this.src=\'https://7.dusays.com/2021/02/20/76b86c0226ffd.svg\';"/>',n+='<div class="info">',n+='<img src="'+(t.avatar||"https://7.dusays.com/2021/02/20/8f277b4ee0ecd.svg")+'" onerror="javascript:this.src=\'https://7.dusays.com/2021/02/20/8f277b4ee0ecd.svg\';"/>',n+='<span class="title">'+t.title+"</span>",n+='<span class="desc">'+(t.description||t.url)+"</span>",n+="</div>",n+="</a>",n+="</div>",$(e).find(".group-body").append(n)})},function(){$(e).find(".loading-wrap svg").remove(),$(e).find(".loading-wrap p").text("加载失败，请稍后重试。")})}};$(function(){const t=document.getElementsByClassName("sitesjs-wrap");for(var e=0;e<t.length;e++){const n=t[e],r=n.getAttribute("api"),i=n.getAttribute("group");if(null!=r){var s=new Object;s.class=n.getAttribute("class"),s.el=n,s.api=r,s.group=i,sitesjs.layout(s)}}});